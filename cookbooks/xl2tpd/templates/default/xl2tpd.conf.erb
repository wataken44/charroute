[global]
port = <%= @port ? @port : 1701 %>
auth file = /etc/xl2tpd/l2tp-secrets
access control = <%= @access_control ? 'yes' : 'no' %>
rand source = dev
<% if @debug %>
debug avp = <%= @debug['avp'] ? 'yes' : 'no'  %>
debug network = <%= @debug['network'] ? 'yes' : 'no' %>
debug state = <%= @debug['state'] ? 'yes' : 'no'  %>
debug tunnel = <%= @debug['tunnel'] ? 'yes' : 'no' %>
<% end %>

<% @servers.each do |lns, param| %>
[lns <%= lns %>]
challenge = yes
exclusive = no
flow bit = yes
ip range = <%= param['low-address'] %>-<%= param['high-address'] %>
local ip = <%= param['local-ip'] %>
name = <%= param['hostname'] %>
pppoptfile = /etc/ppp/options.xl2tpd
refuse pap = yes
require authentication = yes
require chap = yes
<% end %>
